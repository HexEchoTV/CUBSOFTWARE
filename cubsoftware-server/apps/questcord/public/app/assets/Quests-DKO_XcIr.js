import{r as u,o as L,s as B,c as x,i as f,a as e,t as m,q as F,p as V,v as W,x as I,y as Y,g as j,l as ue,z as de,A as ye,u as he,h as Q,b as we,d as N,w as K,e as _e,f as G,B as $e,F as ne,C as oe,n as X,j as O}from"./index-ClFZdPZW.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ke={class:"minigame-container"},Ce={class:"challenge-content"},Ae={class:"scrambled-word text-4xl font-bold text-center mb-6 text-blue-400"},Te={class:"timer text-center mb-4"},Ie={class:"answer-input"},qe=["disabled"],Me=["disabled"],Se={__name:"WordScramble",props:{challenge:{type:Object,required:!0}},emits:["submit","timeout"],setup(C,{emit:n}){const y=C,$=n,o=u(""),d=u(y.challenge.timeLimit),p=u(!1),b=u(null);let l=null;function g(){!o.value.trim()||p.value||(p.value=!0,clearInterval(l),$("submit",{answer:o.value.toLowerCase().trim(),correctAnswer:y.challenge.answer}))}function c(){l=setInterval(()=>{d.value--,d.value<=0&&(clearInterval(l),$("timeout"))},1e3)}return L(()=>{c(),setTimeout(()=>{var s;(s=b.value)==null||s.focus()},100)}),B(()=>{l&&clearInterval(l)}),(s,a)=>(f(),x("div",ke,[a[4]||(a[4]=e("div",{class:"minigame-header"},[e("h3",{class:"text-2xl font-bold text-center mb-2"},"üî§ Word Scramble Challenge"),e("p",{class:"text-gray-400 text-center mb-4"},"Unscramble the word below!")],-1)),e("div",Ce,[e("div",Ae,m(C.challenge.scrambled.toUpperCase()),1),e("div",Te,[e("span",{class:F(["text-lg",d.value<=5?"text-red-500 animate-pulse":"text-gray-300"])}," ‚è±Ô∏è "+m(d.value)+"s remaining ",3)]),e("div",Ie,[V(e("input",{"onUpdate:modelValue":a[0]||(a[0]=v=>o.value=v),onKeyup:Y(g,["enter"]),onPaste:a[1]||(a[1]=I(()=>{},["prevent"])),onCopy:a[2]||(a[2]=I(()=>{},["prevent"])),onCut:a[3]||(a[3]=I(()=>{},["prevent"])),type:"text",placeholder:"Type your answer here...",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white text-center text-xl focus:outline-none focus:border-blue-500",disabled:p.value,ref_key:"answerInput",ref:b,autocomplete:"off"},null,40,qe),[[W,o.value]])]),e("button",{onClick:g,disabled:!o.value.trim()||p.value,class:"w-full mt-4 py-3 px-6 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors"},m(p.value?"Submitting...":"Submit Answer"),9,Me)])]))}},ie=P(Se,[["__scopeId","data-v-453fba2e"]]),Qe={class:"minigame-container"},ze={class:"challenge-content"},Re={class:"equation text-4xl font-bold text-center mb-6 text-green-400"},je={class:"timer text-center mb-4"},Fe={class:"answer-input"},Pe=["disabled"],De=["disabled"],Le={__name:"MathChallenge",props:{challenge:{type:Object,required:!0}},emits:["submit","timeout"],setup(C,{emit:n}){const y=C,$=n,o=u(""),d=u(y.challenge.timeLimit),p=u(!1),b=u(null);let l=null;function g(){!o.value||p.value||(p.value=!0,clearInterval(l),$("submit",{answer:o.value.toString().trim(),correctAnswer:y.challenge.answer}))}function c(){l=setInterval(()=>{d.value--,d.value<=0&&(clearInterval(l),$("timeout"))},1e3)}return L(()=>{c(),setTimeout(()=>{var s;(s=b.value)==null||s.focus()},100)}),B(()=>{l&&clearInterval(l)}),(s,a)=>(f(),x("div",Qe,[a[4]||(a[4]=e("div",{class:"minigame-header"},[e("h3",{class:"text-2xl font-bold text-center mb-2"},"üî¢ Math Challenge"),e("p",{class:"text-gray-400 text-center mb-4"},"Solve the equation!")],-1)),e("div",ze,[e("div",Re,m(C.challenge.equation)+" = ? ",1),e("div",je,[e("span",{class:F(["text-lg",d.value<=5?"text-red-500 animate-pulse":"text-gray-300"])}," ‚è±Ô∏è "+m(d.value)+"s remaining ",3)]),e("div",Fe,[V(e("input",{"onUpdate:modelValue":a[0]||(a[0]=v=>o.value=v),onKeyup:Y(g,["enter"]),onPaste:a[1]||(a[1]=I(()=>{},["prevent"])),onCopy:a[2]||(a[2]=I(()=>{},["prevent"])),onCut:a[3]||(a[3]=I(()=>{},["prevent"])),type:"number",placeholder:"Type your answer here...",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white text-center text-xl focus:outline-none focus:border-green-500",disabled:p.value,ref_key:"answerInput",ref:b,autocomplete:"off"},null,40,Pe),[[W,o.value]])]),e("button",{onClick:g,disabled:!o.value||p.value,class:"w-full mt-4 py-3 px-6 bg-green-600 hover:bg-green-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors"},m(p.value?"Submitting...":"Submit Answer"),9,De)])]))}},Be=P(Le,[["__scopeId","data-v-6a172f6f"]]),Ee={class:"minigame-container"},Ue={class:"challenge-content"},Oe={class:"question text-xl font-semibold text-center mb-6 text-purple-400 px-4"},Ve={class:"timer text-center mb-4"},Ne={class:"answer-input"},Ke=["disabled"],Ge=["disabled"],We={__name:"TriviaChallenge",props:{challenge:{type:Object,required:!0}},emits:["submit","timeout"],setup(C,{emit:n}){const y=C,$=n,o=u(""),d=u(y.challenge.timeLimit),p=u(!1),b=u(null);let l=null;function g(){return(y.challenge.description||"").split(`

`)[0]||"Answer the trivia question"}function c(){if(!o.value.trim()||p.value)return;p.value=!0,clearInterval(l);const a=o.value.toLowerCase().trim(),v=a===y.challenge.answer||y.challenge.alternatives&&y.challenge.alternatives.includes(a);$("submit",{answer:o.value.toLowerCase().trim(),correctAnswer:y.challenge.answer,isCorrect:v})}function s(){l=setInterval(()=>{d.value--,d.value<=0&&(clearInterval(l),$("timeout"))},1e3)}return L(()=>{s(),setTimeout(()=>{var a;(a=b.value)==null||a.focus()},100)}),B(()=>{l&&clearInterval(l)}),(a,v)=>(f(),x("div",Ee,[v[5]||(v[5]=e("div",{class:"minigame-header"},[e("h3",{class:"text-2xl font-bold text-center mb-2"},"‚ùì Trivia Challenge"),e("p",{class:"text-gray-400 text-center mb-4"},"Answer the question correctly!")],-1)),e("div",Ue,[e("div",Oe,m(g()),1),e("div",Ve,[e("span",{class:F(["text-lg",d.value<=5?"text-red-500 animate-pulse":"text-gray-300"])}," ‚è±Ô∏è "+m(d.value)+"s remaining ",3)]),v[4]||(v[4]=e("div",{class:"text-center text-sm text-gray-500 mb-4"}," Answer the question about QuestCord ",-1)),e("div",Ne,[V(e("input",{"onUpdate:modelValue":v[0]||(v[0]=S=>o.value=S),onKeyup:Y(c,["enter"]),onPaste:v[1]||(v[1]=I(()=>{},["prevent"])),onCopy:v[2]||(v[2]=I(()=>{},["prevent"])),onCut:v[3]||(v[3]=I(()=>{},["prevent"])),type:"text",placeholder:"Type your answer here...",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white text-center text-xl focus:outline-none focus:border-purple-500",disabled:p.value,ref_key:"answerInput",ref:b,autocomplete:"off"},null,40,Ke),[[W,o.value]])]),e("button",{onClick:c,disabled:!o.value.trim()||p.value,class:"w-full mt-4 py-3 px-6 bg-purple-600 hover:bg-purple-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors"},m(p.value?"Submitting...":"Submit Answer"),9,Ge)])]))}},Ye=P(We,[["__scopeId","data-v-44eb953a"]]),He={class:"minigame-container"},Xe={class:"challenge-content"},Je={class:"reaction-zone"},Ze={key:0,class:"waiting-message text-center text-xl text-gray-400 mb-8"},et={key:1,class:"ready-message text-center text-2xl text-green-400 font-bold mb-8 animate-pulse"},tt={class:"flex justify-center"},st=["disabled"],at={key:2,class:"reaction-time text-center mt-6"},lt={class:"text-2xl font-bold text-yellow-400"},rt={__name:"ReactionTest",props:{challenge:{type:Object,required:!0}},emits:["submit","timeout"],setup(C,{emit:n}){const y=C,$=n,o=u(!1),d=u(!1),p=u(null);let b=0,l=null,g=null;function c(){if(!o.value||d.value)return;d.value=!0;const a=Date.now();p.value=a-b,g&&clearTimeout(g),setTimeout(()=>{$("submit",{success:!0,reactionTime:p.value})},1e3)}function s(){l=setTimeout(()=>{o.value=!0,b=Date.now(),g=setTimeout(()=>{d.value||$("timeout")},y.challenge.timeLimit*1e3)},y.challenge.delay)}return L(()=>{s()}),B(()=>{l&&clearTimeout(l),g&&clearTimeout(g)}),(a,v)=>(f(),x("div",He,[v[2]||(v[2]=e("div",{class:"minigame-header"},[e("h3",{class:"text-2xl font-bold text-center mb-2"},"‚ö° Reaction Test"),e("p",{class:"text-gray-400 text-center mb-4"},"Click the button when it turns GREEN!")],-1)),e("div",Xe,[e("div",Je,[o.value?(f(),x("div",et," CLICK NOW! ‚ö° ")):(f(),x("div",Ze,[...v[0]||(v[0]=[e("p",{class:"mb-2"},"The button will change color shortly...",-1),e("p",{class:"text-sm text-gray-500"},"Stay focused!",-1)])])),e("div",tt,[e("button",{onClick:c,disabled:!o.value||d.value,class:F([{"bg-gray-600":!o.value,"bg-green-500 hover:bg-green-600 scale-110 shadow-lg shadow-green-500/50":o.value,"cursor-not-allowed":d.value},"w-48 h-48 rounded-full text-white font-bold text-xl transition-all duration-300 disabled:cursor-not-allowed"])},m(o.value?"CLICK NOW!":"Wait..."),11,st)]),p.value?(f(),x("div",at,[e("p",lt,m(p.value)+"ms",1),v[1]||(v[1]=e("p",{class:"text-sm text-gray-400"},"Reaction time",-1))])):j("",!0)])])]))}},nt=P(rt,[["__scopeId","data-v-3851f9c1"]]),ot={class:"minigame-container"},it={class:"challenge-content"},ut={key:0,class:"memorization-phase"},dt={class:"sequence-display text-7xl text-center mb-6 font-mono tracking-widest"},ct={class:"timer text-center"},vt={class:"text-lg text-yellow-400"},mt={class:"text-center text-sm text-gray-500 mt-4"},pt={key:1,class:"recall-phase"},ft={class:"timer text-center mb-4"},bt={class:"instructions text-center mb-6"},gt={class:"text-sm text-gray-500"},xt={class:"answer-input"},yt=["disabled"],ht=["disabled"],wt={__name:"MemoryGame",props:{challenge:{type:Object,required:!0}},emits:["submit","timeout"],setup(C,{emit:n}){const y=C,$=n,o=u("memorize"),d=u(y.challenge.memorizeTime||5),p=u(y.challenge.timeLimit),b=u(""),l=u(!1),g=u(null);let c=null,s=null;function a(){const A=y.challenge.difficulty||"medium";return A==="easy"?"Only lowercase letters - 4 characters":A==="hard"?"Mixed case letters and numbers - 6 characters":"Lowercase letters and numbers - 5 characters"}function v(){return(y.challenge.difficulty||"medium")==="hard"?"Case-sensitive! Type exactly as shown (no spaces)":"Type the characters in order (no spaces)"}function S(){if(!b.value.trim()||l.value)return;l.value=!0,clearInterval(s);const A=b.value.replace(/\s/g,""),k=y.challenge.answer;$("submit",{answer:A,correctAnswer:k})}function D(){c=setInterval(()=>{d.value--,d.value<=0&&(clearInterval(c),q())},1e3)}function q(){o.value="recall",setTimeout(()=>{var A;(A=g.value)==null||A.focus()},100),s=setInterval(()=>{p.value--,p.value<=0&&(clearInterval(s),$("timeout"))},1e3)}return L(()=>{D()}),B(()=>{c&&clearInterval(c),s&&clearInterval(s)}),(A,k)=>(f(),x("div",ot,[k[5]||(k[5]=e("div",{class:"minigame-header"},[e("h3",{class:"text-2xl font-bold text-center mb-2"},"üß† Memory Challenge"),e("p",{class:"text-gray-400 text-center mb-4"},"Memorize the emoji sequence!")],-1)),e("div",it,[o.value==="memorize"?(f(),x("div",ut,[e("div",dt,m(C.challenge.sequence.join(" ")),1),e("div",ct,[e("span",vt," üìñ Memorize in "+m(d.value)+"s ",1)]),e("div",mt,m(a()),1)])):o.value==="recall"?(f(),x("div",pt,[e("div",ft,[e("span",{class:F(["text-lg",p.value<=5?"text-red-500 animate-pulse":"text-gray-300"])}," ‚è±Ô∏è "+m(p.value)+"s remaining ",3)]),e("div",bt,[k[4]||(k[4]=e("p",{class:"text-gray-300 mb-2"},"Type the sequence you saw:",-1)),e("p",gt,m(v()),1)]),e("div",xt,[V(e("input",{"onUpdate:modelValue":k[0]||(k[0]=z=>b.value=z),onKeyup:Y(S,["enter"]),onPaste:k[1]||(k[1]=I(()=>{},["prevent"])),onCopy:k[2]||(k[2]=I(()=>{},["prevent"])),onCut:k[3]||(k[3]=I(()=>{},["prevent"])),type:"text",placeholder:"Type without spaces...",class:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white text-center text-3xl font-mono tracking-widest focus:outline-none focus:border-yellow-500",disabled:l.value,ref_key:"answerInput",ref:g,autocomplete:"off",spellcheck:"false"},null,40,yt),[[W,b.value]])]),e("button",{onClick:S,disabled:!b.value.trim()||l.value,class:"w-full mt-4 py-3 px-6 bg-yellow-600 hover:bg-yellow-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-bold rounded-lg transition-colors"},m(l.value?"Submitting...":"Submit Answer"),9,ht)])):j("",!0)])]))}},_t=P(wt,[["__scopeId","data-v-d0eadc03"]]),$t={class:"minigame-modal"},kt={class:"quest-info text-center mb-6"},Ct={class:"text-2xl font-bold text-white mb-2"},At={class:"text-gray-400 text-sm"},Tt={key:0,class:"result-display"},It={key:0,class:"success-result"},qt={class:"text-center"},Mt={class:"rewards bg-gradient-to-br from-green-900/30 to-blue-900/30 rounded-lg p-4 mb-6 border border-green-500/30"},St={class:"flex justify-center gap-6"},Qt={class:"text-yellow-400 font-bold text-xl"},zt={class:"text-purple-400 font-bold text-xl"},Rt={class:"text-blue-400 font-bold text-xl"},jt={key:1,class:"failure-result"},Ft={class:"text-center"},Pt={class:"text-gray-300 mb-6"},Dt={key:1,class:"minigame-wrapper"},Lt={__name:"QuestMinigame",props:{quest:{type:Object,required:!0},challenge:{type:Object,required:!0},onComplete:{type:Function,required:!0},onFail:{type:Function,required:!0},onClose:{type:Function,required:!0}},setup(C){const n=C,y=u(!1),$=u(null),o=u(""),d=u({currency:0,gems:0,xp:0}),p=ue(()=>{switch(n.challenge.type){case"word_scramble":return ie;case"math":return Be;case"trivia":return Ye;case"reaction":return nt;case"memory":return _t;default:return ie}});async function b(c){let s=!1;if(n.challenge.type==="reaction"?s=c.success:n.challenge.type==="trivia"?s=c.isCorrect:s=c.answer===c.correctAnswer,s){const a=await n.onComplete(n.quest.id,c);a&&a.success?($.value="success",d.value=a.rewards||{currency:n.quest.reward_currency,gems:n.quest.reward_gems,xp:50},y.value=!0):($.value="failure",o.value=(a==null?void 0:a.message)||"Failed to complete quest. Please try again.",y.value=!0)}else $.value="failure",o.value="Incorrect answer! The quest has been marked as failed.",y.value=!0,await n.onFail(n.quest.id)}async function l(){$.value="failure",o.value="Time's up! You didn't complete the challenge in time.",y.value=!0,await n.onFail(n.quest.id)}function g(){n.onClose()}return(c,s)=>(f(),x("div",{class:"minigame-modal-overlay",onClick:I(g,["self"])},[e("div",$t,[e("button",{onClick:g,class:"absolute top-4 right-4 text-gray-400 hover:text-white transition-colors z-10"},[...s[0]||(s[0]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("div",kt,[e("h2",Ct,m(C.quest.quest_name),1),e("p",At,m(C.quest.description),1)]),y.value?(f(),x("div",Tt,[$.value==="success"?(f(),x("div",It,[e("div",qt,[s[2]||(s[2]=e("div",{class:"text-6xl mb-4 animate-bounce"},"‚úÖ",-1)),s[3]||(s[3]=e("h3",{class:"text-3xl font-bold text-green-400 mb-2"},"Success!",-1)),s[4]||(s[4]=e("p",{class:"text-xl text-gray-200 font-semibold mb-4"},"Quest Completed",-1)),s[5]||(s[5]=e("p",{class:"text-gray-300 mb-4"},"You successfully completed the challenge!",-1)),e("div",Mt,[s[1]||(s[1]=e("p",{class:"text-lg font-semibold text-white mb-3"},"Rewards Earned:",-1)),e("div",St,[e("div",null,[e("p",Qt,"+"+m(d.value.currency)+" Dakari",1)]),e("div",null,[e("p",zt,"+"+m(d.value.gems)+" Gems",1)]),e("div",null,[e("p",Rt,"+"+m(d.value.xp)+" XP",1)])])]),e("button",{onClick:g,class:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-bold rounded-lg transition-colors"}," Awesome! ")])])):(f(),x("div",jt,[e("div",Ft,[s[6]||(s[6]=e("div",{class:"text-6xl mb-4"},"‚ùå",-1)),s[7]||(s[7]=e("h3",{class:"text-3xl font-bold text-red-400 mb-2"},"You Failed!",-1)),s[8]||(s[8]=e("p",{class:"text-xl text-gray-200 font-semibold mb-4"},"Quest Failed",-1)),e("p",Pt,m(o.value),1),s[9]||(s[9]=e("div",{class:"bg-gray-800/50 rounded-lg p-4 mb-6 border border-red-500/30"},[e("p",{class:"text-sm text-gray-400"}," This quest cannot be retried today. Try other quests or come back tomorrow! ")],-1)),e("button",{onClick:g,class:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white font-bold rounded-lg transition-colors"}," Try Another Quest ")])]))])):(f(),x("div",Dt,[(f(),de(ye(p.value),{challenge:C.challenge,onSubmit:b,onTimeout:l},null,40,["challenge"]))]))])]))}},Bt=P(Lt,[["__scopeId","data-v-2032671c"]]),Et={class:"min-h-screen flex flex-col"},Ut={class:"hero"},Ot={class:"container"},Vt={class:"hero-buttons"},Nt={class:"container mx-auto px-4 py-8 flex-1"},Kt={class:"mb-8 text-center"},Gt={class:"flex items-center justify-center gap-4 max-w-2xl mx-auto"},Wt=["disabled"],Yt=["value"],Ht={key:0,class:"mb-8"},Xt={class:"bg-dark-800 rounded-lg p-8 border border-primary"},Jt={class:"text-2xl font-bold text-center mb-6"},Zt={class:"relative h-32 mb-6 overflow-hidden"},es={class:"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-2"},ts={class:"text-xs text-center text-gray-400 mt-2 whitespace-nowrap"},ss={class:"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-2"},as={class:"text-xs text-center text-gray-400 mt-2 whitespace-nowrap"},ls={class:"w-full bg-dark-700 rounded-full h-4 overflow-hidden mb-4"},rs={class:"text-center text-gray-400"},ns={class:"text-primary font-bold"},os={key:1,class:"text-center py-12"},is={key:2,class:"bg-red-900/20 border border-red-500 rounded-lg p-6 text-center"},us={class:"text-red-400"},ds={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},cs={class:"flex justify-between items-start mb-4"},vs={class:"text-xl font-bold mb-1"},ms={class:"text-gray-400 mb-4 text-sm"},ps={class:"mb-4 bg-dark-900/50 rounded p-3"},fs={class:"flex gap-4 text-sm"},bs={class:"text-yellow-400"},gs={class:"text-purple-400"},xs={class:"flex gap-2"},ys=["onClick","disabled"],hs={key:1,disabled:"",class:"flex-1 py-3 px-6 bg-blue-600 text-white font-bold rounded-lg cursor-not-allowed opacity-75"},ws={key:2,disabled:"",class:"flex-1 py-3 px-6 bg-green-600 text-white font-bold rounded-lg cursor-not-allowed opacity-75"},_s={key:3,disabled:"",class:"flex-1 py-3 px-6 bg-red-600 text-white font-bold rounded-lg cursor-not-allowed opacity-75"},$s={key:0,class:"mt-3 text-xs"},ks={key:4,class:"text-center py-12"},Cs={__name:"Quests",setup(C){const n=he(),y=u(!1),$=u(!0),o=u([]),d=u([]),p=u(null),b=u(null),l=u([]),g=u(null),c=u(!1),s=u(0),a=u(null),v=u(null),S=u(!1),D=u(null),q=u(null),A="https://questcord.fun";let k=null,z=null;L(async()=>{await J(),await ve(),l.value.length>0&&(g.value||(g.value=l.value[0].id),b.value=g.value,c.value||await M()),H()});function H(){k&&clearInterval(k),z&&clearInterval(z),c.value?z=setInterval(async()=>{await J(),Z()},1e3):k=setInterval(async()=>{b.value&&!c.value&&await M(!0)},6e4)}B(()=>{k&&clearInterval(k),z&&clearInterval(z),U&&clearInterval(U)});async function J(){var r,t;if(n.isAuthenticated)try{const h=await Q.get(`${A}/api/v1/users/me`,{headers:{Authorization:`Bearer ${n.token}`}});if(h.data.success){const _=h.data.data,T=Math.floor(Date.now()/1e3);if(_.traveling&&_.travel_arrives_at>T)c.value=!0,a.value=_.travel_destination,v.value=_.travel_arrives_at,g.value=_.current_server||((r=l.value[0])==null?void 0:r.id),Z();else{const w=c.value;c.value=!1,g.value=_.current_server||((t=l.value[0])==null?void 0:t.id),b.value=g.value,w&&(H(),await M(!0))}}}catch(h){console.error("Error checking travel status:",h)}}function Z(){if(!c.value||!v.value)return;const r=Math.floor(Date.now()/1e3);v.value-(v.value-300);const t=r-(v.value-300);s.value=Math.min(100,Math.max(0,t/300*100)),r>=v.value&&(c.value=!1,g.value=a.value,b.value=g.value,M(!0))}async function ce(){var r,t;if(!n.isAuthenticated){n.login();return}if(b.value===g.value){await M();return}try{const h=await Q.post(`${A}/api/v1/travel`,{destination:b.value},{headers:{Authorization:`Bearer ${n.token}`}});h.data.success&&(c.value=!0,a.value=b.value,v.value=h.data.data.arrivesAt,s.value=0,H())}catch(h){alert(((t=(r=h.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to start travel"),b.value=g.value}}async function ve(){try{if(!n.isAuthenticated){l.value=[{id:"1404523107544469545",name:"QuestCord"}];return}const r=await Q.get(`${A}/api/v1/users/me/servers`,{headers:{Authorization:`Bearer ${n.token}`}});r.data.success&&r.data.data.length>0?l.value=r.data.data:l.value=[{id:"1404523107544469545",name:"QuestCord"}]}catch(r){console.error("Error fetching servers:",r),l.value=[{id:"1404523107544469545",name:"QuestCord"}]}}async function M(r=!1){var t,h;if(b.value){r||(y.value=!0),p.value=null;try{const[_,T]=await Promise.all([Q.get(`${A}/api/v1/quests?serverId=${b.value}`),n.isAuthenticated?Q.get(`${A}/api/v1/quests/user?serverId=${b.value}`,{headers:{Authorization:`Bearer ${n.token}`}}):Promise.resolve({data:{data:{quests:[]}}})]);o.value=Array.isArray(_.data.data)?_.data.data:[];const w=T.data.data;w&&Array.isArray(w.quests)?d.value=w.quests:Array.isArray(w)?d.value=w:d.value=[],console.log("User quests loaded:",d.value),te(),xe()}catch(_){r||(p.value=((h=(t=_.response)==null?void 0:t.data)==null?void 0:h.message)||"Failed to load quests"),console.error("Error fetching quests:",_),r||(o.value=[],d.value=[])}finally{y.value=!1,$.value=!1}}}async function me(r){var t,h,_,T;if(!n.isAuthenticated){n.login();return}try{const w=await Q.post(`${A}/api/v1/quests/${r}/accept`,{},{headers:{Authorization:`Bearer ${n.token}`}});w.data.success&&w.data.challenge?(q.value=o.value.find(i=>i.id===r),D.value=w.data.challenge,S.value=!0):w.data.success&&await M(!0)}catch(w){const i=((h=(t=w.response)==null?void 0:t.data)==null?void 0:h.error)||((T=(_=w.response)==null?void 0:_.data)==null?void 0:T.message)||"Failed to accept quest";i.toLowerCase().includes("already accepted")?await M(!0):alert(i)}}async function pe(r,t){var h,_,T,w,i;try{const R=await Q.post(`${A}/api/v1/quests/${r}/complete`,{challengeData:t},{headers:{Authorization:`Bearer ${n.token}`}});return R.data.success?(M(!0),{success:!0,rewards:R.data.rewards||{currency:((h=q.value)==null?void 0:h.reward_currency)||0,gems:((_=q.value)==null?void 0:_.reward_gems)||0,xp:((T=q.value)==null?void 0:T.reward_experience)||0}}):{success:!1,message:R.data.message}}catch(R){return console.error("Error completing quest:",R),{success:!1,message:((i=(w=R.response)==null?void 0:w.data)==null?void 0:i.message)||"Failed to complete quest"}}}async function ee(r){try{await Q.post(`${A}/api/v1/quests/${r}/fail`,{},{headers:{Authorization:`Bearer ${n.token}`}}),M(!0)}catch(t){console.error("Error failing quest:",t)}}function fe(){q.value&&S.value&&ee(q.value.id),S.value=!1,D.value=null,q.value=null}function be(r){return{easy:"text-green-400",medium:"text-yellow-400",hard:"text-orange-400",expert:"text-red-400"}[r]||"text-gray-400"}const E=u({});let U=null;function ge(r){const t=Math.floor(Date.now()/1e3),h=r-t;if(h<=0)return"Expired";const _=Math.floor(h/3600),T=Math.floor(h%3600/60),w=h%60;return _>0?`${_}h ${T}m ${w}s`:T>0?`${T}m ${w}s`:`${w}s`}function te(){const r={};o.value.forEach(t=>{t.expires_at&&(r[t.id]=ge(t.expires_at))}),E.value=r}function xe(){U&&clearInterval(U),U=setInterval(()=>{te()},1e3)}function se(r){return d.value.some(t=>t.quest_id===r&&t.status==="active")}function ae(r){return d.value.some(t=>t.quest_id===r&&t.status==="completed")}function le(r){return d.value.some(t=>t.quest_id===r&&t.status==="failed")}const re=ue(()=>{const r={easy:1,medium:2,hard:3,expert:4};return[...o.value].sort((t,h)=>(r[t.difficulty]||99)-(r[h.difficulty]||99))});return(r,t)=>{var _,T,w;const h=_e("router-link");return f(),x("div",Et,[e("div",Ut,[e("div",Ot,[t[7]||(t[7]=e("div",{class:"hero-title-container"},[e("h1",{class:"hero-title"},"QuestCord")],-1)),t[8]||(t[8]=e("p",{class:"hero-subtitle"},"Quest across the Discord universe",-1)),t[9]||(t[9]=e("p",{class:"hero-description"},"Complete quests, defeat bosses, and climb the global leaderboard in this immersive Discord RPG experience",-1)),e("div",Vt,[N(h,{to:"/dashboard",class:"btn btn-primary"},{default:K(()=>[...t[3]||(t[3]=[O("Dashboard",-1)])]),_:1}),N(h,{to:"/bosses",class:"btn btn-secondary"},{default:K(()=>[...t[4]||(t[4]=[O("Bosses",-1)])]),_:1}),N(h,{to:"/guilds",class:"btn btn-secondary"},{default:K(()=>[...t[5]||(t[5]=[O("Guilds",-1)])]),_:1}),N(h,{to:"/profile",class:"btn btn-secondary"},{default:K(()=>[...t[6]||(t[6]=[O("Profile",-1)])]),_:1}),G(n).isAuthenticated?(f(),x("button",{key:0,onClick:t[0]||(t[0]=i=>G(n).logout()),class:"btn btn-secondary",style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",border:"none"}},"Logout")):(f(),x("button",{key:1,onClick:t[1]||(t[1]=i=>G(n).login()),class:"btn btn-secondary",style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",border:"none"}},"Login"))])])]),e("main",Nt,[e("div",Kt,[t[11]||(t[11]=e("div",{class:"flex items-center justify-center gap-3 mb-3"},[e("div",{class:"text-5xl"},"üìú"),e("h2",{class:"text-4xl font-bold bg-gradient-to-r from-primary to-purple-400 bg-clip-text text-transparent"}," Available Quests ")],-1)),t[12]||(t[12]=e("p",{class:"text-gray-400 text-lg mb-6"},"Embark on epic quests and earn valuable rewards",-1)),e("div",Gt,[t[10]||(t[10]=e("label",{class:"text-sm text-gray-400"},"Server:",-1)),V(e("select",{"onUpdate:modelValue":t[2]||(t[2]=i=>b.value=i),onChange:ce,disabled:c.value,class:"flex-1 bg-dark-800 border border-dark-600 rounded-lg px-4 py-2 text-white hover:border-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[(f(!0),x(ne,null,oe(l.value,i=>(f(),x("option",{key:i.id,value:i.id},m(i.name),9,Yt))),128))],40,Wt),[[$e,b.value]])])]),c.value?(f(),x("div",Ht,[e("div",Xt,[e("h3",Jt,"üöÄ Traveling to "+m((_=l.value.find(i=>i.id===a.value))==null?void 0:_.name)+"...",1),e("div",Zt,[t[16]||(t[16]=e("div",{class:"absolute top-1/2 left-0 right-0 h-1 bg-dark-600 transform -translate-y-1/2"},null,-1)),e("div",{class:"absolute top-1/2 left-0 h-1 bg-gradient-to-r from-primary to-purple-500 transform -translate-y-1/2 transition-all duration-1000",style:X({width:s.value+"%"})},null,4),e("div",es,[t[13]||(t[13]=e("div",{class:"w-16 h-16 bg-dark-700 border-2 border-primary rounded-full flex items-center justify-center"},[e("span",{class:"text-2xl"},"üè∞")],-1)),e("div",ts,m((T=l.value.find(i=>i.id===g.value))==null?void 0:T.name),1)]),e("div",{class:"absolute top-1/2 transform -translate-y-1/2 -translate-x-1/2 transition-all duration-1000",style:X({left:s.value+"%"})},[...t[14]||(t[14]=[e("div",{class:"w-12 h-12 bg-gradient-to-r from-primary to-purple-500 rounded-full flex items-center justify-center animate-bounce"},[e("span",{class:"text-2xl"},"üöÄ")],-1)])],4),e("div",ss,[t[15]||(t[15]=e("div",{class:"w-16 h-16 bg-dark-700 border-2 border-purple-500 rounded-full flex items-center justify-center"},[e("span",{class:"text-2xl"},"üè∞")],-1)),e("div",as,m((w=l.value.find(i=>i.id===a.value))==null?void 0:w.name),1)])]),e("div",ls,[e("div",{class:"h-full bg-gradient-to-r from-primary to-purple-500 transition-all duration-1000 flex items-center justify-center text-xs font-bold text-white",style:X({width:s.value+"%"})},m(Math.round(s.value))+"% ",5)]),e("p",rs,[e("span",ns,m(Math.max(0,Math.ceil((v.value-Math.floor(Date.now()/1e3))/60))),1),t[17]||(t[17]=O(" minutes remaining ",-1))])])])):j("",!0),$.value&&!c.value?(f(),x("div",os,[...t[18]||(t[18]=[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-400"},"Loading quests...",-1)])])):p.value&&!c.value?(f(),x("div",is,[e("p",us,m(p.value),1),e("button",{onClick:M,class:"btn btn-primary mt-4"},"Try Again")])):re.value.length>0&&!c.value?(f(),x("div",ds,[(f(!0),x(ne,null,oe(re.value,i=>(f(),x("div",{key:i.id,class:"bg-dark-800 rounded-lg p-6 hover:bg-dark-700 transition-colors border border-dark-700"},[e("div",cs,[e("div",null,[e("h3",vs,m(i.name),1),e("span",{class:F(["text-sm font-medium",be(i.difficulty)])},m(i.difficulty.toUpperCase()),3)])]),e("p",ms,m(i.description),1),e("div",ps,[t[19]||(t[19]=e("div",{class:"text-sm text-gray-400 mb-2"},"Rewards:",-1)),e("div",fs,[e("span",bs,"üí∞ "+m(i.reward_currency)+" Dakari",1),e("span",gs,"‚ú® "+m(i.reward_experience)+" XP",1)])]),e("div",xs,[!se(i.id)&&!ae(i.id)&&!le(i.id)?(f(),x("button",{key:0,onClick:R=>me(i.id),class:"btn btn-primary flex-1",disabled:!G(n).isAuthenticated}," Accept Quest ",8,ys)):se(i.id)?(f(),x("button",hs," üéÆ Minigame In Progress ")):ae(i.id)?(f(),x("button",ws," ‚úì Quest Completed ")):le(i.id)?(f(),x("button",_s," ‚úó Quest Failed ")):j("",!0)]),i.expires_at&&E.value[i.id]?(f(),x("div",$s,[e("span",{class:F(E.value[i.id]==="Expired"?"text-red-400":"text-yellow-400")}," ‚è∞ "+m(E.value[i.id]==="Expired"?"Expired":`Resets in ${E.value[i.id]}`),3)])):j("",!0)]))),128))])):c.value?j("",!0):(f(),x("div",ks,[...t[20]||(t[20]=[e("div",{class:"text-6xl mb-4"},"üìú",-1),e("h3",{class:"text-2xl font-bold mb-2"},"No Active Quests",-1),e("p",{class:"text-gray-400"},"Check back later for new quests!",-1)])]))]),t[21]||(t[21]=we('<footer class="footer" data-v-6a3db9da><div class="container" data-v-6a3db9da><div class="footer-content" data-v-6a3db9da><div class="footer-text" data-v-6a3db9da> ¬© 2025 QuestCord Made with love by <a href="https://discord.com/users/378501056008683530" target="_blank" rel="noopener noreferrer" class="footer-link" data-v-6a3db9da>CUB</a> and Scarlett </div><div class="footer-legal-links" data-v-6a3db9da><a href="http://localhost:3000/terms" class="footer-legal-link" data-v-6a3db9da>Terms of Service</a><span class="footer-separator" data-v-6a3db9da>|</span><a href="http://localhost:3000/privacy" class="footer-legal-link" data-v-6a3db9da>Privacy Policy</a></div></div></div></footer>',1)),S.value&&q.value&&D.value?(f(),de(Bt,{key:0,quest:q.value,challenge:D.value,onComplete:pe,onFail:ee,onClose:fe},null,8,["quest","challenge"])):j("",!0)])}}},Is=P(Cs,[["__scopeId","data-v-6a3db9da"]]);export{Is as default};
