import{k as A,r as m,h as U,u as I,l as k,m as M,o as z,c as i,a as t,b as F,d as w,w as C,e as N,f as a,t as o,g as h,n as $,p as E,v as L,q as T,i as n,j as P}from"./index-BoEPiGnn.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R=A("user",()=>{const D=m(null),S=m(null),c=m(!1),s=m(null);async function p(f){var d,u;c.value=!0,s.value=null;try{const r=await U.get(`/api/v1/users/${f}`);return r.data.success?(D.value=r.data.data,S.value={level:r.data.data.level,experience:r.data.data.experience,totalExperience:r.data.data.total_experience,currency:r.data.data.currency,gems:r.data.data.gems,questsCompleted:r.data.data.quests_completed,bossesDefeated:r.data.data.bosses_defeated},!0):(s.value=r.data.error||"Failed to fetch profile",!1)}catch(r){return console.error("Error fetching profile:",r),s.value=((u=(d=r.response)==null?void 0:d.data)==null?void 0:u.error)||"Failed to fetch profile",!1}finally{c.value=!1}}async function b(f,d){var u,r;c.value=!0,s.value=null;try{const _=await U.patch(`/api/v1/users/${f}`,d);return _.data.success?(D.value={...D.value,...d},!0):(s.value=_.data.error||"Failed to update profile",!1)}catch(_){return console.error("Error updating profile:",_),s.value=((r=(u=_.response)==null?void 0:u.data)==null?void 0:r.error)||"Failed to update profile",!1}finally{c.value=!1}}function y(f,d){const u=Math.floor(100*Math.pow(1.5,d-1)),r=f/u*100;return{current:f,required:u,percentage:Math.min(r,100)}}return{profileData:D,stats:S,loading:c,error:s,fetchProfile:p,updateProfile:b,calculateLevelProgress:y}}),G={class:"min-h-screen flex flex-col"},O={class:"hero"},K={class:"container"},X={class:"hero-buttons"},Y={class:"container mx-auto px-4 py-8 flex-1"},Z={key:0,class:"text-center py-12"},H={key:1,class:"text-center py-12"},J={class:"text-gray-400"},W={key:2,class:"max-w-4xl mx-auto"},ee={class:"bg-dark-800 rounded-b-lg shadow-lg p-8 -mt-16 relative z-10"},te={class:"flex flex-col md:flex-row items-center md:items-end gap-6"},se={class:"relative"},ae=["src","alt"],re={class:"absolute -bottom-2 -right-2 bg-primary text-white font-bold px-3 py-1 rounded-full shadow-lg"},oe={class:"flex-1 text-center md:text-left"},le={class:"text-3xl font-bold text-white mb-2 flex items-center gap-2 justify-center md:justify-start"},ie={key:0,class:"verified-badge",title:"Verified User"},ne={key:0,class:"mb-2 flex items-center gap-2 justify-center md:justify-start"},de={class:"text-xs text-gray-500 px-2 py-1 bg-dark-700 rounded"},ue={key:1,class:"text-gray-400 mb-4"},ce={key:2,class:"text-gray-500 italic mb-4"},fe={class:"mb-4"},pe={class:"flex justify-between text-sm mb-1"},ve={class:"text-gray-400"},be={class:"w-full bg-dark-700 rounded-full h-3 overflow-hidden"},xe={class:"flex gap-4"},ge={class:"bg-dark-700 px-6 py-3 rounded-lg text-center"},me={class:"text-2xl font-bold text-yellow-400"},ye={class:"bg-dark-700 px-6 py-3 rounded-lg text-center"},_e={class:"text-2xl font-bold text-purple-400"},he={key:0,class:"bg-dark-800 rounded-lg shadow-lg p-8 mt-6"},De={class:"space-y-4"},ke={class:"text-xs text-gray-500 mt-1"},we={class:"flex items-center gap-2"},Ce={class:"flex gap-3 pt-4"},Pe=["disabled"],Se={key:0,class:"text-red-500 text-sm"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8"},Le={class:"card-hover"},Ue={class:"text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"},$e={class:"card-hover"},Be={class:"text-3xl font-bold text-green-400"},je={class:"card-hover"},qe={class:"text-3xl font-bold text-red-400"},Ve={class:"card-hover"},Ae={class:"text-3xl font-bold text-blue-400"},Ie={class:"bg-dark-800 rounded-lg shadow-lg p-8 mt-8"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ze={class:"flex justify-between items-center py-3 border-b border-dark-700"},Fe={class:"font-semibold"},Ne={class:"flex justify-between items-center py-3 border-b border-dark-700"},Te={key:0,class:"flex justify-between items-center py-3 border-b border-dark-700"},Qe={class:"font-semibold"},Re={class:"flex justify-between items-center py-3 border-b border-dark-700"},Ge={class:"font-semibold"},Oe={key:3,class:"text-center py-12"},Ke={__name:"Profile",setup(D){const S=M(),c=I(),s=R(),p=m(!1),b=m(""),y=m(""),f=m(""),d=k(()=>{var l;return S.params.userId||((l=c.user)==null?void 0:l.discordId)}),u=k(()=>c.user&&c.user.discordId===d.value),r=k(()=>s.profileData?s.calculateLevelProgress(s.profileData.experience,s.profileData.level):{current:0,required:100,percentage:0}),_=k(()=>{var e;return(e=s.profileData)!=null&&e.discord_id?s.profileData.avatar_hash?`https://cdn.discordapp.com/avatars/${s.profileData.discord_id}/${s.profileData.avatar_hash}.png?size=128`:`https://cdn.discordapp.com/embed/avatars/${parseInt(s.profileData.discord_id)%6}.png`:"https://cdn.discordapp.com/embed/avatars/0.png"}),B=k(()=>{var e;if(!((e=s.profileData)!=null&&e.created_at))return"Unknown";const l=typeof s.profileData.created_at=="number"?s.profileData.created_at*1e3:s.profileData.created_at;return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})});z(async()=>{d.value&&(await s.fetchProfile(d.value),s.profileData&&u.value&&(b.value=s.profileData.profile_bio||"",y.value=s.profileData.profile_banner||"",f.value=s.profileData.vanity_url||""))});function j(){if(!u.value){console.error("Cannot edit another user's profile");return}p.value=!0}async function q(){if(!d.value||!u.value){console.error("Cannot save another user's profile");return}await s.updateProfile(d.value,{profile_bio:b.value,profile_banner:y.value,vanity_url:f.value||null})&&(p.value=!1)}function V(){var l,e,g;b.value=((l=s.profileData)==null?void 0:l.profile_bio)||"",y.value=((e=s.profileData)==null?void 0:e.profile_banner)||"",f.value=((g=s.profileData)==null?void 0:g.vanity_url)||"",p.value=!1}function x(l){if(l==null)return"0";const e=Math.abs(l);return e>=1e15?(l/1e15).toFixed(1).replace(/\.0$/,"")+"Q":e>=1e12?(l/1e12).toFixed(1).replace(/\.0$/,"")+"T":e>=1e9?(l/1e9).toFixed(1).replace(/\.0$/,"")+"B":e>=1e6?(l/1e6).toFixed(1).replace(/\.0$/,"")+"M":e>=1e3?(l/1e3).toFixed(1).replace(/\.0$/,"")+"K":l.toString()}return(l,e)=>{const g=N("router-link");return n(),i("div",G,[t("div",O,[t("div",K,[e[10]||(e[10]=t("div",{class:"hero-title-container"},[t("h1",{class:"hero-title"},"QuestCord")],-1)),e[11]||(e[11]=t("p",{class:"hero-subtitle"},"Quest across the Discord universe",-1)),e[12]||(e[12]=t("p",{class:"hero-description"},"Complete quests, defeat bosses, and climb the global leaderboard in this immersive Discord RPG experience",-1)),t("div",X,[w(g,{to:"/dashboard",class:"btn btn-primary"},{default:C(()=>[...e[6]||(e[6]=[P("Dashboard",-1)])]),_:1}),w(g,{to:"/quests",class:"btn btn-secondary"},{default:C(()=>[...e[7]||(e[7]=[P("Quests",-1)])]),_:1}),w(g,{to:"/bosses",class:"btn btn-secondary"},{default:C(()=>[...e[8]||(e[8]=[P("Bosses",-1)])]),_:1}),w(g,{to:"/guilds",class:"btn btn-secondary"},{default:C(()=>[...e[9]||(e[9]=[P("Guilds",-1)])]),_:1}),a(c).isAuthenticated?(n(),i("button",{key:0,onClick:e[0]||(e[0]=v=>a(c).logout()),class:"btn btn-secondary",style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",border:"none"}},"Logout")):(n(),i("button",{key:1,onClick:e[1]||(e[1]=v=>a(c).login()),class:"btn btn-secondary",style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",border:"none"}},"Login"))])])]),t("main",Y,[a(s).loading?(n(),i("div",Z,[...e[13]||(e[13]=[t("div",{class:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto"},null,-1),t("p",{class:"mt-4 text-gray-400"},"Loading profile...",-1)])])):a(s).error?(n(),i("div",H,[e[14]||(e[14]=t("div",{class:"text-red-500 text-xl mb-4"},"Error loading profile",-1)),t("p",J,o(a(s).error),1)])):a(s).profileData?(n(),i("div",W,[t("div",{class:"h-48 rounded-t-lg bg-gradient-to-r from-primary/20 to-secondary/20 relative overflow-hidden",style:$(a(s).profileData.profile_banner?`background-image: url(${a(s).profileData.profile_banner}); background-size: cover; background-position: center;`:"")},[...e[15]||(e[15]=[t("div",{class:"absolute inset-0 bg-gradient-to-b from-transparent to-dark-900/50"},null,-1)])],4),t("div",ee,[t("div",te,[t("div",se,[t("img",{src:_.value,alt:a(s).profileData.username,class:"w-32 h-32 rounded-full border-4 border-dark-800 shadow-xl",onError:e[2]||(e[2]=v=>v.target.src="/images/default-avatar.png")},null,40,ae),t("div",re," Lv "+o(a(s).profileData.level),1)]),t("div",oe,[t("h1",le,[a(s).profileData.verified?(n(),i("span",ie,[...e[16]||(e[16]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",class:"w-7 h-7"},[t("path",{"fill-rule":"evenodd",d:"M8.603 3.799A4.49 4.49 0 0112 2.25c1.357 0 2.573.6 3.397 1.549a4.49 4.49 0 013.498 1.307 4.491 4.491 0 011.307 3.497A4.49 4.49 0 0121.75 12a4.49 4.49 0 01-1.549 3.397 4.491 4.491 0 01-1.307 3.497 4.491 4.491 0 01-3.497 1.307A4.49 4.49 0 0112 21.75a4.49 4.49 0 01-3.397-1.549 4.49 4.49 0 01-3.498-1.306 4.491 4.491 0 01-1.307-3.498A4.49 4.49 0 012.25 12c0-1.357.6-2.573 1.549-3.397a4.49 4.49 0 011.307-3.497 4.49 4.49 0 013.497-1.307zm7.007 6.387a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z","clip-rule":"evenodd"})],-1)])])):h("",!0),t("span",null,o(a(s).profileData.username),1)]),a(s).profileData.guild?(n(),i("div",ne,[e[17]||(e[17]=t("span",{class:"text-sm text-gray-400"},"ðŸ°",-1)),w(g,{to:"/guilds",class:"text-lg font-semibold text-primary hover:text-primary/80 transition-colors"},{default:C(()=>[P(" ["+o(a(s).profileData.guild.tag)+"] "+o(a(s).profileData.guild.name),1)]),_:1}),t("span",de," Lv "+o(a(s).profileData.guild.level),1)])):h("",!0),!p.value&&a(s).profileData.profile_bio?(n(),i("p",ue,o(a(s).profileData.profile_bio),1)):p.value?h("",!0):(n(),i("p",ce," No bio set ")),t("div",fe,[t("div",pe,[e[18]||(e[18]=t("span",{class:"text-gray-400"},"Experience",-1)),t("span",ve,o(x(r.value.current))+" / "+o(x(r.value.required))+" XP ",1)]),t("div",be,[t("div",{class:"bg-gradient-to-r from-primary to-secondary h-full transition-all duration-500 rounded-full",style:$({width:r.value.percentage+"%"})},null,4)])]),u.value&&!p.value?(n(),i("button",{key:3,onClick:j,class:"btn btn-primary"}," Edit Profile ")):h("",!0)]),t("div",xe,[t("div",ge,[t("div",me,o(x(a(s).profileData.currency)),1),e[19]||(e[19]=t("div",{class:"text-xs text-gray-400"},"Dakari",-1))]),t("div",ye,[t("div",_e,o(x(a(s).profileData.gems)),1),e[20]||(e[20]=t("div",{class:"text-xs text-gray-400"},"Gems",-1))])])])]),p.value?(n(),i("div",he,[e[27]||(e[27]=t("h2",{class:"text-2xl font-bold mb-6"},"Edit Profile",-1)),t("div",De,[t("div",null,[e[21]||(e[21]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Bio",-1)),E(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=v=>b.value=v),class:"input w-full h-24 resize-none",placeholder:"Tell us about yourself...",maxlength:"200"},null,512),[[L,b.value]]),t("div",ke,o(b.value.length)+" / 200",1)]),t("div",null,[e[22]||(e[22]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Banner URL",-1)),E(t("input",{"onUpdate:modelValue":e[4]||(e[4]=v=>y.value=v),type:"url",class:"input w-full",placeholder:"https://example.com/banner.jpg"},null,512),[[L,y.value]]),e[23]||(e[23]=t("div",{class:"text-xs text-gray-500 mt-1"},"Image URL for your profile banner",-1))]),t("div",null,[e[25]||(e[25]=t("label",{class:"block text-sm font-medium text-gray-300 mb-2"},"Vanity URL",-1)),t("div",we,[e[24]||(e[24]=t("span",{class:"text-gray-400"},"questcord.fun/profile/",-1)),E(t("input",{"onUpdate:modelValue":e[5]||(e[5]=v=>f.value=v),type:"text",class:"input flex-1",placeholder:"your-custom-url",pattern:"[a-zA-Z0-9_-]{3,30}",maxlength:"30"},null,512),[[L,f.value]])]),e[26]||(e[26]=t("div",{class:"text-xs text-gray-500 mt-1"}," 3-30 characters (letters, numbers, underscores, hyphens). Leave empty to use Discord ID. ",-1))]),t("div",Ce,[t("button",{onClick:q,class:"btn btn-primary",disabled:a(s).loading},o(a(s).loading?"Saving...":"Save Changes"),9,Pe),t("button",{onClick:V,class:"btn btn-secondary"}," Cancel ")]),a(s).error?(n(),i("div",Se,o(a(s).error),1)):h("",!0)])])):h("",!0),t("div",Ee,[t("div",Le,[e[28]||(e[28]=t("div",{class:"text-gray-400 text-sm mb-2"},"Total Experience",-1)),t("div",Ue,o(x(a(s).profileData.total_experience)),1)]),t("div",$e,[e[29]||(e[29]=t("div",{class:"text-gray-400 text-sm mb-2"},"Quests Completed",-1)),t("div",Be,o(x(a(s).profileData.quests_completed)),1)]),t("div",je,[e[30]||(e[30]=t("div",{class:"text-gray-400 text-sm mb-2"},"Bosses Defeated",-1)),t("div",qe,o(x(a(s).profileData.bosses_defeated)),1)]),t("div",Ve,[e[31]||(e[31]=t("div",{class:"text-gray-400 text-sm mb-2"},"Items Owned",-1)),t("div",Ae,o(x(a(s).profileData.inventoryCount)),1)])]),t("div",Ie,[e[36]||(e[36]=t("h2",{class:"text-2xl font-bold mb-6"},"Additional Information",-1)),t("div",Me,[t("div",ze,[e[32]||(e[32]=t("span",{class:"text-gray-400"},"Current Location",-1)),t("span",Fe,o(a(s).profileData.current_location||"Spawn Town"),1)]),t("div",Ne,[e[33]||(e[33]=t("span",{class:"text-gray-400"},"Traveling",-1)),t("span",{class:T(a(s).profileData.traveling?"text-yellow-400":"text-gray-500")},o(a(s).profileData.traveling?"Yes":"No"),3)]),a(s).profileData.traveling?(n(),i("div",Te,[e[34]||(e[34]=t("span",{class:"text-gray-400"},"Destination",-1)),t("span",Qe,o(a(s).profileData.travel_destination),1)])):h("",!0),t("div",Re,[e[35]||(e[35]=t("span",{class:"text-gray-400"},"Member Since",-1)),t("span",Ge,o(B.value),1)])])])])):(n(),i("div",Oe,[...e[37]||(e[37]=[t("div",{class:"text-xl text-gray-400"},"Profile not found",-1)])]))]),e[38]||(e[38]=F('<footer class="footer" data-v-6b3097a4><div class="container" data-v-6b3097a4><div class="footer-content" data-v-6b3097a4><div class="footer-text" data-v-6b3097a4> Â© 2025 QuestCord Made with love by <a href="https://discord.com/users/378501056008683530" target="_blank" rel="noopener noreferrer" class="footer-link" data-v-6b3097a4>CUB</a> and Scarlett </div><div class="footer-legal-links" data-v-6b3097a4><a href="https://cubsoftware.site/terms" class="footer-legal-link" data-v-6b3097a4>Terms of Service</a><span class="footer-separator" data-v-6b3097a4>|</span><a href="https://cubsoftware.site/privacy" class="footer-legal-link" data-v-6b3097a4>Privacy Policy</a></div></div></div></footer>',1))])}}},Ze=Q(Ke,[["__scopeId","data-v-6b3097a4"]]);export{Ze as default};
