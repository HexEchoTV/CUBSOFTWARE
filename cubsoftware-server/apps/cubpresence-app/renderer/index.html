<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data: https:;">
    <title>CubPresence</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <header class="header">
            <h1>CubPresence</h1>
            <p>Discord Custom Rich Presence</p>
            <span class="version" id="appVersion"></span>
        </header>

        <!-- Update Banner -->
        <div class="update-banner" id="updateBanner" style="display: none;">
            <span id="updateText">Checking for updates...</span>
            <button id="updateAction" style="display: none;">Update</button>
        </div>

        <!-- Status Bar -->
        <div class="status-bar" id="statusBar">
            <div class="status-dot" id="statusDot"></div>
            <span id="statusText">Not connected</span>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="config-panel">
                <!-- Application ID -->
                <div class="section">
                    <h2>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4M12 8h.01"/></svg>
                        Application
                    </h2>
                    <div class="field">
                        <label for="clientId">Discord Application ID</label>
                        <input type="text" id="clientId" placeholder="e.g. 1234567890123456789">
                        <p class="hint">Create an app at <a href="https://discord.com/developers/applications" id="devPortalLink">Discord Developer Portal</a></p>
                    </div>
                </div>

                <!-- Activity Text -->
                <div class="section">
                    <h2>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/></svg>
                        Activity Text
                    </h2>
                    <div class="field">
                        <label for="details">Details (Line 1)</label>
                        <input type="text" id="details" placeholder="e.g. Playing a custom game" maxlength="128">
                    </div>
                    <div class="field">
                        <label for="state">State (Line 2)</label>
                        <input type="text" id="state" placeholder="e.g. In the main menu" maxlength="128">
                    </div>
                </div>

                <!-- Timestamps -->
                <div class="section">
                    <h2>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
                        Timestamps
                    </h2>
                    <div class="timestamp-options">
                        <label class="radio-option active">
                            <input type="radio" name="timestampType" value="none" checked> None
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="timestampType" value="elapsed"> Elapsed
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="timestampType" value="countdown"> Countdown
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="timestampType" value="custom"> Custom
                        </label>
                    </div>
                    <div class="custom-timestamps" id="customTimestamps" style="display: none;">
                        <div class="field-row">
                            <div class="field">
                                <label for="startTimestamp">Start (Unix)</label>
                                <input type="number" id="startTimestamp" placeholder="e.g. 1700000000">
                            </div>
                            <div class="field">
                                <label for="endTimestamp">End (Unix)</label>
                                <input type="number" id="endTimestamp" placeholder="e.g. 1700003600">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Images -->
                <div class="section">
                    <h2>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/></svg>
                        Images
                    </h2>
                    <p class="hint" style="margin-bottom: 12px;">Use asset keys from your Discord app or direct image URLs</p>
                    <div class="field-row">
                        <div class="field">
                            <label for="largeImageKey">Large Image</label>
                            <input type="text" id="largeImageKey" placeholder="Asset key or URL">
                        </div>
                        <div class="field">
                            <label for="largeImageText">Large Tooltip</label>
                            <input type="text" id="largeImageText" placeholder="Hover text" maxlength="128">
                        </div>
                    </div>
                    <div class="field-row">
                        <div class="field">
                            <label for="smallImageKey">Small Image</label>
                            <input type="text" id="smallImageKey" placeholder="Asset key or URL">
                        </div>
                        <div class="field">
                            <label for="smallImageText">Small Tooltip</label>
                            <input type="text" id="smallImageText" placeholder="Hover text" maxlength="128">
                        </div>
                    </div>
                </div>

                <!-- Buttons -->
                <div class="section">
                    <h2>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M9 12h6"/></svg>
                        Buttons
                    </h2>
                    <p class="hint" style="margin-bottom: 12px;">Buttons appear on your profile (you can't click your own buttons)</p>
                    <div class="field-row">
                        <div class="field">
                            <label for="btn1Label">Button 1 Label</label>
                            <input type="text" id="btn1Label" placeholder="e.g. Join Game" maxlength="32">
                        </div>
                        <div class="field">
                            <label for="btn1Url">Button 1 URL</label>
                            <input type="url" id="btn1Url" placeholder="https://...">
                        </div>
                    </div>
                    <div class="field-row">
                        <div class="field">
                            <label for="btn2Label">Button 2 Label</label>
                            <input type="text" id="btn2Label" placeholder="e.g. Website" maxlength="32">
                        </div>
                        <div class="field">
                            <label for="btn2Url">Button 2 URL</label>
                            <input type="url" id="btn2Url" placeholder="https://...">
                        </div>
                    </div>
                </div>

                <!-- Party -->
                <div class="section">
                    <h2>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="20" height="20"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        Party (Optional)
                    </h2>
                    <div class="field-row">
                        <div class="field">
                            <label for="partySize">Party Size</label>
                            <input type="number" id="partySize" placeholder="e.g. 2" min="0">
                        </div>
                        <div class="field">
                            <label for="partyMax">Party Max</label>
                            <input type="number" id="partyMax" placeholder="e.g. 5" min="0">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preview Panel -->
            <div class="preview-panel">
                <h3>Preview</h3>
                <div class="discord-preview">
                    <div class="preview-header">Playing a game</div>
                    <div class="preview-body">
                        <div class="preview-images">
                            <div class="preview-large" id="previewLarge">
                                <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="2" ry="2" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                            </div>
                            <div class="preview-small" id="previewSmall" style="display: none;"></div>
                        </div>
                        <div class="preview-info">
                            <div class="preview-name">Your App Name</div>
                            <div class="preview-details" id="previewDetails"></div>
                            <div class="preview-state" id="previewState"></div>
                            <div class="preview-timestamp" id="previewTimestamp"></div>
                        </div>
                    </div>
                    <div class="preview-buttons" id="previewButtons"></div>
                </div>
            </div>
        </main>

        <!-- Action Buttons -->
        <footer class="actions">
            <button class="btn btn-connect" id="connectBtn">
                <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20"><path d="M19.27 5.33C17.94 4.71 16.5 4.26 15 4a.09.09 0 0 0-.07.03c-.18.33-.39.76-.53 1.09a16.09 16.09 0 0 0-4.8 0c-.14-.34-.35-.76-.54-1.09c-.01-.02-.04-.03-.07-.03c-1.5.26-2.93.71-4.27 1.33c-.01 0-.02.01-.03.02c-2.72 4.07-3.47 8.03-3.1 11.95c0 .02.01.04.03.05c1.8 1.32 3.53 2.12 5.24 2.65c.03.01.06 0 .07-.02c.4-.55.76-1.13 1.07-1.74c.02-.04 0-.08-.04-.09c-.57-.22-1.11-.48-1.64-.78c-.04-.02-.04-.08-.01-.11c.11-.08.22-.17.33-.25c.02-.02.05-.02.07-.01c3.44 1.57 7.15 1.57 10.55 0c.02-.01.05-.01.07.01c.11.09.22.17.33.26c.04.03.04.09-.01.11c-.52.31-1.07.56-1.64.78c-.04.01-.05.06-.04.09c.32.61.68 1.19 1.07 1.74c.03.01.06.02.09.01c1.72-.53 3.45-1.33 5.25-2.65c.02-.01.03-.03.03-.05c.44-4.53-.73-8.46-3.1-11.95c-.01-.01-.02-.02-.04-.02z"/></svg>
                Connect to Discord
            </button>
            <button class="btn btn-disconnect" id="disconnectBtn" style="display: none;">
                Disconnect
            </button>
            <button class="btn btn-update" id="updateBtn" style="display: none;">
                Update Presence
            </button>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
